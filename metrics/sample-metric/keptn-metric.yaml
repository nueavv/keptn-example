apiVersion: metrics.keptn.sh/v1beta1
kind: KeptnMetric
metadata:
  name: available-cpus
spec:
  provider:
    # ğŸ‘‡ (í•„ìˆ˜) ë°ì´í„° ì†ŒìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ì´ë¦„ 
    name: dev-prometheus 
  # ğŸ‘‡ (í•„ìˆ˜) ë©”íŠ¸ë¦­ì„ ì–»ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ê³µê¸‰ì ë³„ ì¿¼ë¦¬ ë¬¸
  query: "sum(kube_node_status_capacity{resources=`cpu`})"
  # ğŸ‘‡ (í•„ìˆ˜) ì§€í‘œ ì—…ë°ì´íŠ¸ ê°„ê²© 
  fetchIntervalSeconds: 10
  # # ğŸ‘‡ (ì„ íƒ) ì§€í‘œì˜ ë²”ìœ„ì™€ ì§‘ê³„ ë°©ë²•
  # range: 
  #   # ì¿¼ë¦¬ ì¸í„°ë²Œ (ê¸°ë³¸ ê°’ 5m)
  #   interval: ""
  #   # ê·¸ë˜í”„ì˜ í•´ìƒë„ë¥¼ ì¡°ì ˆí•˜ê¸° ìœ„í•œ ê°’
  #   step: ""
  #   # ë°ì´í„° ì§‘ê³„ ë°©ë²•
  #   aggregation: <p90|p95|p99|max|min|avg|median>
  #   # ì§€ë‚œ ë°ì´í„° ì§‘ê³„ ê²°ê³¼ë¥¼ ì–¼ë§ˆë™ì•ˆ ì €ì¥í•˜ê³  ìˆì„ ì§€ 
  #   storedResults: 
  # # ğŸ‘‡ keptnì´ ì§€í‘œë¥¼ ê°€ì ¸ì˜¤ë©´ì„œ ì¶”ê°€í•œ ê°’
  # # ì§€í‘œ ê°€ì ¸ì˜¤ì§€ ëª»í•œê²½ìš° ê·¸ ì´ìœ ì— ëŒ€í•´ ìƒì„¸
  # # ê°€ì ¸ì˜¤ëŠ” ê²½ìš° í‰ê°€ëœ ì‹œê°„ë“±ì— ëŒ€í•´ ê¸°ë¡ 
  # status:
  #   properties:
  #     # ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ 
  #     value:
  #     rawValue:
  #     errMsg:
  #     lastUpdated: